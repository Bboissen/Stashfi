# Act configuration for local GitHub Actions execution
# Run with: act -j <job-name> or act push to simulate push event

# Workflows directory
--workflows=.github/workflows

# Secret and variable files for local runs
--secret-file=.secrets
--var-file=.vars

# Map GitHub runner labels to our CI toolbox image on GHCR
# This ensures consistency between GitHub Actions and local testing
# Build and push: ./scripts/build_ci_toolbox.sh --push --registry ghcr.io/bboissen/ci-toolbox
-P ubuntu-latest=ghcr.io/bboissen/ci-toolbox:24.04
-P ubuntu-24.04=ghcr.io/bboissen/ci-toolbox:24.04

# Environment variables needed for GitHub Actions compatibility
--env RUNNER_TOOL_CACHE=/opt/hostedtoolcache
--env RUNNER_TEMP=/tmp
--env NODE_NO_WARNINGS=1

# Container options for privileged mode (needed for some operations)
--container-options --privileged

# Use native architecture (comment out to force amd64)
# --container-architecture=linux/amd64

# Optional: Reuse containers between runs for faster iteration
# --reuse

# Note: If a workflow fails with our image, it means the workflow needs fixing,
# not that we need a fallback. The workflow should either:
# 1. Run in a container with our image, or
# 2. Be a Docker build job that runs on the host runner
